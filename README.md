QueryBuilder
============
A straight forward and easy-to-use SQL query builder for simple DML and DQL queries.

<p align="center">
    <a href="https://packagist.org/packages/jayrods/querybuilder">
        <img src="./resources/img/logo.png" alt="Package logo"></img>
    </a>
    <a href="LICENSE">
        <img src="https://img.shields.io/github/license/Jadersonrilidio/querybuilder?style=flat-square" alt="Software License"></img>
    </a>
    <a href="https://packagist.org/packages/jayrods/querybuilder">
        <img src="https://img.shields.io/github/downloads/Jadersonrilidio/querybuilder/total?style=flat-square" alt="Downloads"></img>
    </a>
    <a href="https://github.com/Jadersonrilidio/querybuilder/releases">
        <img src="https://img.shields.io/github/v/release/Jadersonrilidio/querybuilder?style=flat-square" alt="Latest Version"></img>
    </a>
    <a href="https://packagist.org/packages/jayrods/querybuilder">
        <img src="https://img.shields.io/github/languages/code-size/Jadersonrilidio/querybuilder?style=flat-square" alt="Code Size"></img>
    </a>

    
</p>


# About the Project

**Writing hard coded SQL queries is a subject of great concern amongst developers!**
It not just lets your code 'dirty' (as some PHP purists might say) but also affects
testability, simplicity and impose more work over development. With those in mind
this package comes in handy with a simple approach of wrapping SQL queries into PHP
classes and methods, providing an abstraction with easy-to-use syntax and extra
features to assert the queries are being written accordingly.

Also bear in mind this package was developed for educational purposes goal.


## Installation

Installation is super-easy via [Composer](https://getcomposer.org/):

```bash
$ composer require jayrods/querybuilder
```

or add it by hand to your `composer.json` file.


## Upgrading

We follow [semantic versioning](https://semver.org/), which means breaking
changes may occur between major releases. We would introduce upgrading guides
whenever major version releases becomes available [here](UPGRADING.md).


## Getting Started

After installing the package via [Composer](https://getcomposer.org/)
you should simply instanciate the QueryBuilder object as bellow:

```php
use Jayrods\QueryBuilder\QueryBuilder;

$builderFactory = new QueryBuilder();
```

The `$builderFactory` object is actually a factory, which have a `QueryBuilder::create`
method to resolve and instantiate the suited QueryBuilder class for each CRUD use-case.
Follow bellow examples of the CRUD instances generated by the `create` method:

```php
// Used to build DELETE-type queries.
$builder = $builderFactory->create(QueryBuilder::DELETE);

// Used to build INSERT-type queries.
$builder = $builderFactory->create(QueryBuilder::INSERT);

// Used to build SELECT-type queries.
$builder = $builderFactory->create(QueryBuilder::SELECT);

// Used to build UPDATE-type queries.
$builder = $builderFactory->create(QueryBuilder::UPDATE);
```

where class constants have the values:

```php
QueryBuilder::DELETE = 'delete';
QueryBuilder::INSERT = 'insert';
QueryBuilder::SELECT = 'select';
QueryBuilder::UPDATE = 'update';
```

by convention, we encourage you to use the provided constants for a
more readable and standardized code instead of use the string values directly.


### Building Queries

For each CRUD use-case instance you will have different available methods to
build a query. Conventionally to start building a query you must call the
starter method with the names matching the SQL syntax as 'selectFrom',
'insertInto', 'delete', 'update'; and finish the building and getting the
query string using the commom method 'build', as shown in the examples bellow:

```php
// Example of building a DELETE query.
$builder = $builderFactory->create(QueryBuilder::DELETE);

$query = $builder->delete('table')
    ->where('id', '=', 'id')
    ->build();

$result = "DELETE FROM table WHERE id = :id";


// Example of building a INSERT query.
$builder = $builderFactory->create(QueryBuilder::INSERT);

$query = $builder->insertInto('table')
    ->column('first')
    ->column('second')
    ->column('third')
    ->build();

$result = "INSERT INTO table (first, second, third) VALUES (:first, :second, :third)";


// Example of building a SELECT query.
$builder = $builderFactory->create(QueryBuilder::SELECT);

$query = $builder->selectFrom('table')
    ->build();

$result = "SELECT * FROM table";


// Example of building a UPDATE query.
$builder = $builderFactory->create(QueryBuilder::UPDATE);

$query = $builder->update('table')
    ->column('name')
    ->column('email')
    ->where('id', '=', 'id')
    ->build();

$result = "UPDATE table SET name = :name, email = :email WHERE id = :id";
```

A Depper explanation of each use-case could be seen bellow:


#### DELETE Queries



Example of a DELETE query use-case:

```php
use Jayrods\QueryBuilder\QueryBuilder;

$builderFactory = new QueryBuilder();

$builder = $builderFactory->create(QueryBuilder::DELETE);

$query = $builder->delete('users')
    ->where('birth_date', '<', 'birth_date')
    ->or('name', 'LIKE', 'Noah')
    ->build();

```

#### INSERT Queries
#### SELECT Queries
#### UPDATE Queries

### Environment variables options
### Customization options
### Advanced options

## Limitations

### Tips
### Comments
### Use Notes

When a new developer clones your codebase, they will have an additional
one-time step to manually copy the `.env.example` file to `.env` and fill-in
their own values (or get any sensitive values from a project co-worker).


## Security

If you discover a security vulnerability within this package, please report the issue or send an
email to [jayrods](jaderson.rodrigues@yahoo.com). All security vulnerabilities
will be promptly addressed. We appreciate your concern.


## License

QueryBuilder is licensed under [The GPL V3.0 License](LICENSE).
